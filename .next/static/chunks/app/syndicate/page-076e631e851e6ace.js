(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[683],{893:function(e,t,n){Promise.resolve().then(n.bind(n,7617)),Promise.resolve().then(n.bind(n,2305))},2305:function(e,t,n){"use strict";n.r(t);var a=n(3827),l=n(4090),i=n(3300),s=n(5759);t.default=()=>{let{user:e,setUser:t,t:n}=(0,s.useGame)(),[r,c]=(0,l.useState)(!1),[d,o]=(0,l.useState)("pending"),[p,x]=(0,l.useState)(!1),[m,b]=(0,l.useState)(!1),[g,u]=(0,l.useState)(""),[h,f]=(0,l.useState)(""),[j,N]=(0,l.useState)(()=>{{let e=localStorage.getItem("cartel_active_wars");return e?JSON.parse(e):[]}}),v=(0,l.useRef)(null);(0,l.useRef)(null);let[w,y]=(0,l.useState)(()=>{{let e=localStorage.getItem("cartel_gangs");return e?JSON.parse(e):[]}}),[k,z]=(0,l.useState)({name:"",entryFee:.05,socialLink:"",logoUrl:""});(0,l.useEffect)(()=>{localStorage.setItem("cartel_gangs",JSON.stringify(w))},[w]),(0,l.useEffect)(()=>{localStorage.setItem("cartel_active_wars",JSON.stringify(j))},[j]);let G=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){let e=new FileReader;e.onloadend=()=>{let t=e.result;n?f(t):z({...k,logoUrl:t})},e.readAsDataURL(a)}},F=n=>{e.balance<n.entryFee||e.joinedGangId||e.myGangId||e.appliedGangId||(y(w.map(t=>t.id===n.id?{...t,pendingApplications:[...t.pendingApplications,{name:e.name,rank:i.y.INDEPENDIENTE,joinedAt:new Date,paidFee:n.entryFee}]}:t)),t({...e,balance:e.balance-n.entryFee,appliedGangId:n.id,pendingFeeLock:n.entryFee}))},I=n=>{let a=w.find(t=>t.id===e.myGangId);if(!a)return;let l=a.pendingApplications.find(e=>e.name===n);if(!l)return;let s=.2*l.paidFee;y(w.map(t=>t.id===e.myGangId?{...t,membersCount:t.membersCount+1,membersList:[...t.membersList,{...l,rank:i.y.RECLUTA}],pendingApplications:t.pendingApplications.filter(e=>e.name!==n)}:t)),t({...e,balance:e.balance+s})},C=n=>{let a=w.find(t=>t.id===e.myGangId);if(!a)return;let l=a.pendingApplications.find(e=>e.name===n);y(w.map(t=>t.id===e.myGangId?{...t,pendingApplications:t.pendingApplications.filter(e=>e.name!==n)}:t)),n===e.name&&t({...e,balance:e.balance+((null==l?void 0:l.paidFee)||0),appliedGangId:void 0,pendingFeeLock:0})},A=w.find(t=>t.id===e.joinedGangId||t.id===e.myGangId),L=void 0!==e.myGangId&&e.rank===i.y.JEFE;return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-2xl p-6 relative overflow-hidden shadow-2xl",children:[(0,a.jsx)("h2",{className:"text-2xl font-marker text-white mb-6 text-center",children:n.syndicate}),A?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-zinc-800 to-zinc-950 p-6 rounded-2xl border border-red-900/30 shadow-inner relative flex flex-col items-center text-center",children:[(0,a.jsx)("div",{className:"absolute top-2 right-4 text-[8px] text-zinc-600 font-black uppercase",children:"STATUS: ACTIVE"}),(0,a.jsxs)("div",{className:"w-24 h-24 rounded-full border-4 border-zinc-800 bg-black/40 mb-4 overflow-hidden flex items-center justify-center p-2 shadow-2xl relative group",children:[(0,a.jsx)("img",{src:A.logoUrl,className:"w-full h-full object-contain",alt:"Gang Logo"}),L&&!A.logoSet&&(0,a.jsx)("div",{onClick:()=>b(!0),className:"absolute inset-0 bg-black/70 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:(0,a.jsx)("span",{className:"text-[10px] text-white font-bold",children:"UPLOAD"})})]}),(0,a.jsx)("p",{className:"text-[10px] text-red-500 font-black uppercase mb-1 tracking-widest",children:n.myGang}),(0,a.jsx)("h3",{className:"text-3xl font-marker text-white mb-2",children:A.name}),(0,a.jsxs)("div",{className:"bg-black/40 px-3 py-1 rounded-full border border-zinc-800 flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-[8px] text-zinc-500 font-black uppercase",children:[n.entryFeeLabel,":"]}),(0,a.jsxs)("span",{className:"text-xs font-bold text-yellow-500",children:[A.entryFee," TON"]})]})]}),L&&(0,a.jsxs)("div",{className:"bg-zinc-950/80 border border-zinc-800 rounded-2xl p-4",children:[(0,a.jsxs)("div",{className:"flex gap-2 mb-4 bg-black p-1 rounded-xl",children:[(0,a.jsxs)("button",{onClick:()=>o("pending"),className:"flex-1 py-2 rounded-lg text-[10px] font-black uppercase transition-all ".concat("pending"===d?"bg-zinc-800 text-white":"text-zinc-600"),children:[n.applications," (",A.pendingApplications.length,")"]}),(0,a.jsx)("button",{onClick:()=>o("members"),className:"flex-1 py-2 rounded-lg text-[10px] font-black uppercase transition-all ".concat("members"===d?"bg-zinc-800 text-white":"text-zinc-600"),children:n.members}),(0,a.jsx)("button",{onClick:()=>o("wars"),className:"flex-1 py-2 rounded-lg text-[10px] font-black uppercase transition-all ".concat("wars"===d?"bg-zinc-800 text-white":"text-zinc-600"),children:n.warTitle})]}),(0,a.jsxs)("div",{className:"space-y-3 min-h-[150px]",children:["pending"===d&&(0===A.pendingApplications.length?(0,a.jsx)("p",{className:"text-center text-zinc-700 text-[10px] py-10 uppercase font-black tracking-widest italic",children:n.noApps}):A.pendingApplications.map((e,t)=>(0,a.jsxs)("div",{className:"bg-zinc-900 p-4 rounded-xl border border-zinc-800 flex justify-between items-center group",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-bold text-white uppercase",children:e.name}),(0,a.jsxs)("p",{className:"text-[9px] text-yellow-600 font-black uppercase tracking-tighter",children:[e.paidFee," TON"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>I(e.name),className:"bg-red-700 text-white px-3 py-2 rounded text-[9px] font-black uppercase hover:bg-red-600 transition-colors",children:n.accept}),(0,a.jsx)("button",{onClick:()=>C(e.name),className:"bg-zinc-800 text-zinc-400 px-3 py-2 rounded text-[9px] font-black uppercase hover:bg-red-900 hover:text-white transition-all",children:n.reject})]})]},t))),"members"===d&&A.membersList.map((e,t)=>(0,a.jsxs)("div",{className:"bg-zinc-900 p-3 rounded-xl border border-zinc-800 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-black border border-zinc-800 flex items-center justify-center text-[10px]",children:"\uD83D\uDC64"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-bold text-white uppercase",children:e.name}),(0,a.jsx)("p",{className:"text-[8px] text-zinc-500 uppercase",children:e.rank})]})]}),(0,a.jsxs)("span",{className:"text-[8px] text-zinc-700 font-black uppercase",children:["JOINED ",new Date(e.joinedAt).toLocaleDateString()]})]},t)),"wars"===d&&(0,a.jsxs)("div",{className:"p-4 text-center",children:[(0,a.jsx)("p",{className:"text-red-500 font-marker text-lg mb-2 uppercase",children:n.warTitle}),(0,a.jsx)("p",{className:"text-[9px] text-zinc-500 uppercase leading-relaxed mb-4",children:n.higherPowerWins}),(0,a.jsx)("button",{className:"w-full py-3 bg-red-900/20 border border-red-900/50 text-red-500 rounded-xl text-[10px] font-black uppercase hover:bg-red-900 hover:text-white transition-all",children:n.rivalScan})]})]})]})]}):(0,a.jsxs)("div",{className:"text-center space-y-6",children:[(0,a.jsx)("div",{className:"text-center py-10 px-6 border-2 border-dashed border-zinc-800 rounded-2xl bg-black/10",children:(0,a.jsx)("p",{className:"text-sm italic text-zinc-600",children:e.appliedGangId?n.waitingApproval:n.noGang})}),e.appliedGangId&&(0,a.jsxs)("div",{className:"bg-yellow-900/10 border border-yellow-700/30 p-5 rounded-2xl text-center animate-in fade-in zoom-in duration-300",children:[(0,a.jsx)("p",{className:"text-[10px] text-yellow-600 font-black uppercase mb-2 tracking-[0.2em]",children:n.pendingApplication}),(0,a.jsx)("button",{onClick:()=>{if(!e.appliedGangId)return;let n=e.appliedGangId,a=e.pendingFeeLock||0;y(w.map(t=>t.id===n?{...t,pendingApplications:t.pendingApplications.filter(t=>t.name!==e.name)}:t)),t({...e,balance:e.balance+a,appliedGangId:void 0,pendingFeeLock:0})},className:"w-full py-3 bg-zinc-800 hover:bg-red-900 text-zinc-400 hover:text-white rounded-xl text-[10px] font-black uppercase transition-all border border-zinc-700 hover:border-red-600",children:n.cancelApplication})]}),!r&&!e.appliedGangId&&(0,a.jsxs)("button",{onClick:()=>c(!0),className:"w-full py-5 rounded-2xl bg-yellow-600 text-black font-marker uppercase tracking-widest text-xl shadow-[0_10px_30px_rgba(202,138,4,0.3)] hover:scale-[1.02] active:scale-95 transition-all",children:[n.createGang," (10 TON)"]})]}),r&&(0,a.jsxs)("div",{className:"space-y-5 bg-black/40 p-6 rounded-3xl border border-yellow-600/30 animate-in slide-in-from-bottom-4 shadow-2xl",children:[(0,a.jsx)("h4",{className:"font-marker text-yellow-500 text-center text-xl uppercase tracking-tighter",children:n.foundNewCartel}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-zinc-900 border-2 border-zinc-800 overflow-hidden flex items-center justify-center relative",children:k.logoUrl?(0,a.jsx)("img",{src:k.logoUrl,className:"w-full h-full object-contain"}):(0,a.jsx)("span",{className:"text-2xl opacity-20",children:"\uD83C\uDFF4‍☠️"})}),(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()},className:"text-[10px] font-black text-blue-500 uppercase tracking-widest hover:underline",children:n.selectEmblem}),(0,a.jsx)("input",{type:"file",ref:v,className:"hidden",accept:"image/*",onChange:e=>G(e,!1)})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-[8px] text-zinc-500 font-black uppercase ml-1",children:n.orgNameLabel}),(0,a.jsx)("input",{type:"text",placeholder:"Ej: Los Hermanos",value:k.name,onChange:e=>z({...k,name:e.target.value}),className:"w-full bg-zinc-900 border border-zinc-800 p-3 rounded-xl text-sm text-white outline-none focus:border-yellow-600"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{className:"text-[8px] text-zinc-500 font-black uppercase ml-1",children:[n.entryFeeLabel," (0.05 - 0.20 TON)"]}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0.05",max:"0.2",value:k.entryFee,onChange:e=>z({...k,entryFee:parseFloat(e.target.value)}),className:"w-full bg-zinc-900 border border-zinc-800 p-3 rounded-xl text-sm text-white outline-none focus:border-yellow-600 font-bold"}),(0,a.jsx)("p",{className:"text-[7px] text-zinc-600 font-bold uppercase mt-1 italic",children:n.commNotice})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-[8px] text-zinc-500 font-black uppercase ml-1",children:n.socialCommLabel}),(0,a.jsx)("input",{type:"text",placeholder:"t.me/TuGrupo",value:k.socialLink,onChange:e=>z({...k,socialLink:e.target.value}),className:"w-full bg-zinc-900 border border-zinc-800 p-3 rounded-xl text-sm text-white outline-none focus:border-yellow-600"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsx)("button",{onClick:()=>{let n=Math.max(.05,Math.min(.2,k.entryFee));if(e.balance<10||!k.name.trim()||!k.socialLink.trim())return;let a=Date.now().toString();y([{id:a,name:k.name,owner:e.name,entryFee:n,membersCount:1,membersList:[{name:e.name,rank:i.y.JEFE,joinedAt:new Date,paidFee:0}],pendingApplications:[],socialLink:k.socialLink,logoUrl:k.logoUrl||"https://i.ibb.co/JFB1dy5G/logo-cartel-wars-removebg-preview.png",linkChangeCount:0,logoSet:!!k.logoUrl},...w]),t({...e,balance:e.balance-10,myGangId:a,rank:i.y.JEFE}),c(!1)},className:"flex-1 bg-red-700 py-4 rounded-xl font-marker uppercase tracking-widest text-sm shadow-xl hover:bg-red-600 active:scale-95 transition-all",children:n.fundBtn}),(0,a.jsx)("button",{onClick:()=>c(!1),className:"px-6 bg-zinc-800 rounded-xl font-marker uppercase text-xs hover:bg-zinc-700 transition-all",children:"X"})]})]}),!A&&!r&&(0,a.jsxs)("div",{className:"mt-8 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-[1px] flex-1 bg-zinc-800"}),(0,a.jsx)("h3",{className:"text-[9px] font-black text-zinc-500 uppercase tracking-[0.4em] whitespace-nowrap",children:n.underworldGangs}),(0,a.jsx)("div",{className:"h-[1px] flex-1 bg-zinc-800"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3",children:w.map(t=>(0,a.jsxs)("div",{className:"bg-zinc-950 border border-zinc-800 p-4 rounded-2xl flex justify-between items-center group hover:border-red-900/30 transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-black border border-zinc-900 flex items-center justify-center overflow-hidden p-1 shadow-inner",children:(0,a.jsx)("img",{src:t.logoUrl||"https://i.ibb.co/JFB1dy5G/logo-cartel-wars-removebg-preview.png",className:"w-full h-full object-contain opacity-70 group-hover:opacity-100 transition-opacity",alt:"Logo"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-white font-bold text-sm tracking-tight group-hover:text-red-500 transition-colors uppercase italic",children:['"',t.name,'"']}),(0,a.jsxs)("div",{className:"flex gap-2 mt-0.5",children:[(0,a.jsxs)("span",{className:"text-[7px] text-zinc-600 font-black uppercase tracking-tighter",children:[t.membersCount," ",n.soldiers]}),(0,a.jsxs)("span",{className:"text-[7px] text-yellow-700 font-black uppercase tracking-tighter",children:[n.joinGang,": ",t.entryFee," TON"]})]})]})]}),(0,a.jsx)("button",{onClick:()=>F(t),disabled:e.balance<t.entryFee||!!e.appliedGangId||!!e.myGangId||!!e.joinedGangId,className:"px-5 py-2.5 rounded-xl font-marker text-[9px] uppercase tracking-widest transition-all ".concat(e.appliedGangId===t.id?"bg-yellow-600/20 text-yellow-500 border border-yellow-600 cursor-not-allowed animate-pulse":e.balance<t.entryFee?"bg-zinc-900 text-zinc-700 opacity-50 cursor-not-allowed":"bg-red-700 text-white hover:bg-red-600 shadow-lg"),children:e.appliedGangId===t.id?"PENDING":n.joinGang})]},t.id))})]})]})})}}},function(e){e.O(0,[901,759,617,971,69,744],function(){return e(e.s=893)}),_N_E=e.O()}]);